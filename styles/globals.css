@tailwind base;
@tailwind components;
@tailwind utilities;

@import url('https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400&family=Abhaya+Libre:wght@800&display=swap');

:root {
  --column-width: 595px;
  --column-gap: 10px;
  --full-width-image: calc(var(--column-width) * 2 + var(--column-gap));
}

@layer base {
  * {
    @apply m-0 p-0 box-border;
  }

  body {
    @apply w-full max-w-container mx-auto px-[120px] pt-[120px] pb-[120px] font-sans;
  }
}

@layer components {
  .nav-logo {
    @apply font-display font-extrabold text-[50px] no-underline text-inherit flex items-center;
  }

  .nav-item {
    @apply font-sans font-normal text-base no-underline text-inherit flex items-center opacity-30 transition-opacity duration-200;
  }

  .nav-item:hover {
    @apply opacity-50;
  }

  .nav-item.active {
    @apply opacity-100;
  }

  .side-menu {
    @apply absolute flex flex-col gap-5 z-[1000] text-left;
    top: 0;
    left: calc(50% + min(600px, 50vw - 120px) + 15px);
    right: auto;
    /* transform handled by JS */
  }

  .side-menu-item {
    @apply font-sans text-base font-normal bg-transparent border-0 text-inherit cursor-pointer p-0 text-left transition-opacity duration-200 opacity-30;
  }

  .side-menu-item:hover {
    @apply opacity-50;
  }

  .side-menu-item.active {
    @apply opacity-100 font-normal;
  }

  .columns-container {
    @apply flex justify-center;
    gap: var(--column-gap);
    width: 100%;
  }

  .column {
    width: var(--column-width);
    max-width: var(--column-width);
  }

  /* Default (Desktop) state */
  .mobile-view {
    display: none;
  }

  .desktop-view {
    /* display: block; removed to allow flex container to work */
  }

  @media (max-width: 1024px) {

    /*
       Previous generic 1-column logic kept for Project/Timeline views
       if they reuse .columns-container directly without .desktop-view wrapper.
       But for Exhibition which uses wrapper, we toggle views.
    */
    .columns-container {
      flex-direction: column;
      align-items: center;
    }

    .column {
      width: 100%;
      max-width: 595px;
    }

    /* Toggle views for Exhibition */
    .mobile-view {
      display: block;
    }

    .desktop-view {
      display: none;
    }

    .project-list-single {
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 100%;
    }

    /* Ensure mobile items have max-width constraint */
    .project-list-single>div {
      width: 100%;
      max-width: 595px;
    }

    /* Allow full-width items to expand */
    .project-list-single>.is-full-width-item {
      max-width: none;
    }

    /* Constrain full-width images to content width on mobile */
    .image-container-full {
      max-width: 100%;
    }

    .project-image-full {
      width: 100%;
      height: auto;
    }
  }



  .project-link {
    @apply no-underline text-inherit block;
  }

  .project-item {
    @apply font-sans text-xl font-bold mb-[15px] relative inline-block;
    padding-right: 15px;
  }

  .project-item::after {
    content: '→';
    position: absolute;
    right: -15px;
    top: 0;
    opacity: 0;
    transform: translateX(-10px);
    transition: opacity 0.3s ease-out, transform 0.3s ease-out;
  }

  .project-link:hover .project-item::after {
    opacity: 1;
    transform: translateX(0);
  }

  .project-item::before {
    content: '';
    position: absolute;
    left: 0;
    bottom: 0;
    width: calc(100% + 15px);
    height: 1px;
    background-color: black;
    transform: scaleX(0);
    transform-origin: left;
    transition: transform 0.3s ease-out;
  }

  .project-link:hover .project-item::before {
    transform: scaleX(1);
    transform-origin: left;
  }

  .project-link:not(:hover) .project-item::before {
    transform: scaleX(0);
    transform-origin: left;
  }

  .project-link:not(:hover) .project-item::after {
    opacity: 0;
    transform: translateX(-10px);
    transition: opacity 0.3s ease-out, transform 0.3s ease-out;
  }

  .project-period {
    @apply font-sans text-sm font-normal opacity-30 mb-[5px];
  }

  .description-box {
    width: 100%;
    @apply font-sans text-sm font-normal border-l border-black pl-[10px] mb-[15px] box-border whitespace-pre-wrap;
    line-height: 19px;
  }

  .description-box p {
    @apply m-0 mb-[14px];
    line-height: 19px;
  }

  .description-box p:last-child {
    @apply mb-0;
  }

  /* Exhibition 전용 description-box (description 텍스트에 투명도 30% 적용) */
  .exhibition-item .description-box p {
    opacity: 0.3;
  }

  .exhibition-solo-group {
    margin-bottom: 100px;
  }

  .timeline-name {
    @apply font-sans font-bold mb-[15px];
    font-size: 20px;
  }

  .timeline-group {
    margin-bottom: 100px;
  }

  .exhibition-item {
    margin-bottom: 20px;
  }

  .exhibition-item .exhibition-image {
    margin-bottom: 0;
  }

  .image-link {
    @apply no-underline text-inherit block leading-none;
  }

  .image-container {
    @apply relative block overflow-hidden;
    width: 100%;
    line-height: 0;
    margin-bottom: 10px;
  }

  .image-container-full {
    @apply relative block overflow-hidden;
    width: 100%;
    max-width: var(--full-width-image);
    line-height: 0;
    margin-bottom: 10px;
  }

  .project-image {
    @apply object-contain;
    width: 100%;
    height: auto;
    image-rendering: -webkit-optimize-contrast;
    image-rendering: crisp-edges;
    display: block;
  }

  .project-image-full {
    @apply object-contain;
    width: 100%;
    height: auto;
    image-rendering: -webkit-optimize-contrast;
    image-rendering: crisp-edges;
    display: block;
  }

  .project-image[loading="lazy"],
  .project-image-full[loading="lazy"] {
    @apply bg-gray-100;
  }

  .overlay-text {
    @apply absolute bottom-[20px] left-5 flex flex-col items-start gap-[5px] z-10;
  }

  .overlay-text>div {
    @apply bg-white text-black px-2 py-1 font-sans m-0 leading-tight shadow-sm;
    display: inline-block;
    width: fit-content;
  }

  .overlay-text-title {
    @apply text-base font-bold;
  }

  .overlay-text-year,
  .overlay-text-caption {
    @apply text-sm font-normal bg-white/80;
  }

  .name-container {
    @apply mb-[100px] flex flex-col items-center;
  }

  .full-width-images-wrapper {
    width: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .full-width-images-wrapper .image-link {
    width: 100%;
    /* max-width는 내부 .image-container-full에서 처리함 */
  }

  .cv-class-item {
    @apply font-sans text-base font-bold mb-[15px];
  }

  .cv-class-group {
    @apply mb-[70px];
  }

  .cv-class-data {
    @apply flex flex-col gap-[15px];
  }

  .cv-data-item {
    @apply pl-[10px] border-l border-black flex flex-col gap-[5px];
  }

  .cv-data-period {
    @apply font-sans text-sm font-normal opacity-30;
  }

  .cv-data-name-client {
    @apply font-sans text-sm;
  }

  .cv-data-name {
    @apply font-bold;
  }

  .cv-data-separator {
    @apply font-normal;
  }

  .cv-data-client {
    @apply font-normal;
  }

  .cv-data-place {
    @apply font-sans text-sm font-normal opacity-30;
  }

  .exhibition-name {
    @apply font-sans font-bold relative;
    display: inline;
    font-size: 20px;
    margin-right: 15px;
    padding-right: 0;

    background-image: linear-gradient(to right, black, black);
    background-position: bottom left;
    background-repeat: no-repeat;
    background-size: 0% 1px;
    transition: background-size 0.3s ease-out;
  }

  /* Add margin to the element following the inline title to maintain vertical spacing */
  .exhibition-name-link>.exhibition-name+* {
    margin-top: 15px;
  }

  /* Fallback if description/image are direct children of Link */
  .exhibition-name+div {
    margin-top: 15px;
  }

  .exhibition-name-link {
    @apply no-underline text-inherit block;
  }

  .exhibition-item-link {
    @apply no-underline text-inherit block;
  }

  .exhibition-name::after {
    content: '→';
    display: inline-block;
    margin-left: 10px;
    opacity: 0;
    transform: translateX(-10px);
    transition: opacity 0.3s ease-out, transform 0.3s ease-out;
  }

  .exhibition-item-link:hover .exhibition-name::after {
    opacity: 1;
    transform: translateX(0);
  }

  /* Remove old underline pseudo-element */
  .exhibition-name::before {
    content: none;
  }

  .exhibition-item-link:hover .exhibition-name {
    background-size: 100% 1px;
  }

  .exhibition-period {
    @apply font-sans mb-[5px];
    font-size: 14px;
    opacity: 0.3;
  }

  .exhibition-description {
    @apply font-sans mb-[15px];
    font-size: 14px;
    opacity: 0.3;
    white-space: pre-wrap;
  }

  .exhibition-description p {
    @apply m-0 mb-[14px];
  }

  .exhibition-description p:last-child {
    @apply mb-0;
  }

  /* 상세 페이지에서 body 패딩 오버라이드 */
  body:has(.artwork-detail-container) {
    padding-left: 0 !important;
    padding-right: 0 !important;
  }

  .artwork-detail-container {
    max-width: 1420px;
    margin: 0 auto;
    padding: 0 15px;
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 10px;
    position: relative;
  }

  .artwork-detail-column-placeholder {
    /* 그리드 레이아웃 유지를 위한 placeholder */
  }

  .artwork-detail-text-column {
    @apply absolute flex flex-col z-[1000] text-left;
    top: 0;
    /* 첫 번째 열 위치: 컨테이너 내부 기준으로 계산 */
    /* 컨테이너 padding 15px + 첫 번째 열 시작 위치 */
    left: 15px;
    right: auto;
    /* 너비는 JavaScript로 동적으로 계산됨 */
    word-wrap: break-word;
    overflow-wrap: break-word;
    /* transform handled by JS */
  }

  /* 반응형: 2열 레이아웃용 이미지 컬럼 (1024px 미만) - 기본적으로 숨김 */
  .artwork-detail-column-responsive {
    display: none;
  }

  /* 1024px 미만: 2열 레이아웃 */
  @media (max-width: 1023px) {
    .artwork-detail-container {
      grid-template-columns: repeat(2, 1fr);
    }

    .artwork-detail-text-column {
      position: relative;
      left: 0;
      transform: none !important;
      width: 100% !important;
      max-width: 100% !important;
    }

    .artwork-detail-column-placeholder {
      display: none !important;
    }

    /* 기존 이미지 컬럼들을 완전히 숨김 */
    .artwork-detail-container > .artwork-detail-column-1,
    .artwork-detail-container > .artwork-detail-column-2 {
      display: none !important;
      visibility: hidden !important;
      opacity: 0 !important;
      height: 0 !important;
      min-height: 0 !important;
      margin: 0 !important;
      padding: 0 !important;
      overflow: hidden !important;
    }

    /* 반응형 이미지 컬럼만 표시 */
    .artwork-detail-container > .artwork-detail-column-responsive {
      display: flex !important;
      flex-direction: column;
      gap: 10px;
      visibility: visible !important;
      opacity: 1 !important;
    }
  }

  /* 1024px 이상: 3열 레이아웃 - 반응형 이미지 컬럼 숨김 */
  @media (min-width: 1024px) {
    .artwork-detail-container > .artwork-detail-column-responsive {
      display: none !important;
      visibility: hidden !important;
      opacity: 0 !important;
      height: 0 !important;
      overflow: hidden !important;
    }

    .artwork-detail-container > .artwork-detail-column-1,
    .artwork-detail-container > .artwork-detail-column-2 {
      display: flex !important;
      visibility: visible !important;
      opacity: 1 !important;
    }
  }

  /* 640px 미만: 1열 레이아웃 */
  @media (max-width: 639px) {
    .artwork-detail-container {
      grid-template-columns: 1fr;
    }

    /* placeholder를 그리드에서 완전히 제거 */
    .artwork-detail-column-placeholder {
      display: none !important;
    }

    /* 기존 이미지 컬럼들을 완전히 숨김 (그리드에서도 제외) */
    .artwork-detail-container > .artwork-detail-column-1,
    .artwork-detail-container > .artwork-detail-column-2 {
      display: none !important;
      visibility: hidden !important;
      opacity: 0 !important;
      height: 0 !important;
      min-height: 0 !important;
      margin: 0 !important;
      padding: 0 !important;
      overflow: hidden !important;
    }

    /* 반응형 이미지 컬럼만 표시 */
    .artwork-detail-container > .artwork-detail-column-responsive {
      display: flex !important;
      flex-direction: column;
      gap: 10px;
      visibility: visible !important;
      opacity: 1 !important;
    }
  }

  .artwork-detail-name {
    @apply font-sans font-bold relative inline-block;
    font-size: 20px;
    margin-bottom: 15px;
  }

  .artwork-detail-metadata {
    border-left: 1px solid black;
    padding-left: 10px;
    margin-bottom: 10px;
  }

  .artwork-detail-artist,
  .artwork-detail-timeline {
    @apply font-sans;
    font-size: 14px;
    opacity: 0.3;
    margin-bottom: 5px;
  }

  .artwork-detail-caption {
    @apply font-sans;
    font-size: 14px;
    opacity: 0.3;
  }

  .artwork-detail-page-text {
    @apply font-sans;
    font-size: 14px;
    opacity: 1;
    /* margin-top: 10px; */
  }

  .artwork-detail-paragraph {
    @apply font-sans;
    font-size: 14px;
    opacity: 1;
    line-height: 1.4;
    margin: 0;
    white-space: pre-wrap; /* 연속된 공백 유지 */
  }

  /* 반응형 텍스트 크기 */
  @media (max-width: 1023px) {
    .artwork-detail-name {
      font-size: 18px;
    }

    .artwork-detail-artist,
    .artwork-detail-timeline,
    .artwork-detail-caption,
    .artwork-detail-page-text,
    .artwork-detail-paragraph {
      font-size: 13px;
    }
  }

  @media (max-width: 639px) {
    .artwork-detail-name {
      font-size: 16px;
    }

    .artwork-detail-artist,
    .artwork-detail-timeline,
    .artwork-detail-caption,
    .artwork-detail-page-text,
    .artwork-detail-paragraph {
      font-size: 12px;
    }
  }

  .artwork-detail-paragraph:last-child {
    margin-bottom: 0;
  }

  /* 문단 구분(null) 다음 문단은 margin-top 추가하지 않음 (break가 간격 처리) */
  .artwork-detail-paragraph-break + .artwork-detail-paragraph {
    margin-top: 0;
  }

  .artwork-detail-paragraph-break {
    height: 0.7em; /* 문단 구분 간격 (두 번 줄바꿈) */
    margin: 0;
  }

  .artwork-detail-column {
    display: flex;
    flex-direction: column;
    gap: 10px;
  }

  .artwork-detail-image-wrapper {
    width: 100%;
    line-height: 0;
  }

  .artwork-detail-image {
    width: 100%;
    height: auto;
    display: block;
  }

  .contact-container {
    @apply flex items-center justify-center;
  }

  .contact-icons-column {
    @apply flex flex-col;
    gap: 30px;
    margin-right: 30px;
  }

  .contact-icon-item {
    @apply flex items-center;
  }

  .contact-links-column {
    @apply flex flex-col;
    gap: 30px;
  }

  .contact-link-item {
    @apply flex items-center;
  }

  .contact-icon-svg {
    width: 20px;
    min-width: 20px;
    max-width: 20px;
    height: auto;
    display: inline-flex;
    align-items: center;
    justify-content: flex-start;
    flex-shrink: 0;
  }

  .contact-icon-svg svg {
    width: 20px;
    height: auto;
    display: block;
  }

  .contact-link {
    @apply font-sans no-underline text-inherit;
    font-size: 14px;
  }

  .contact-link:hover {
    @apply opacity-50;
  }

  /* SVG 선 두께 조절 (stroke 기반 SVG인 경우) */
  .contact-icon-svg svg {
    stroke-width: 1.5px;
    /* 선 두께 설정 - 원하는 값으로 변경 가능 */
  }

  /* SVG 채우기 색상 조절 (fill 기반 SVG인 경우) */
  .contact-icon-svg svg path {
    fill: currentColor;
    /* 현재 텍스트 색상 사용 */
  }

  /* stroke 기반 SVG인 경우 */
  .contact-icon-svg svg path[stroke] {
    stroke: currentColor;
  }

  .contact-icon-placeholder {
    width: 20px;
    height: 20px;
    background-color: #f0f0f0;
  }

  .contact-item:hover .contact-text {
    text-decoration: underline;
  }

  /* Footer separator line */
  .footer-separator {
    width: 1px;
    height: 20px;
    background-color: #f0f0f0;
  }

  @media (max-width: 640px) {

    /* Typography Scaling: 16px -> 14px */
    .nav-item,
    .side-menu-item,
    .overlay-text-title,
    .cv-class-item {
      font-size: 14px;
    }

    /* Typography Scaling: 14px -> 12px */
    .project-period,
    .description-box,
    .overlay-text-year,
    .overlay-text-caption,
    .cv-data-period,
    .cv-data-name-client,
    .cv-data-place,
    .exhibition-period,
    .exhibition-description,
    .contact-link {
      font-size: 12px;
    }

    /* Typography Scaling: 20px -> 18px */
    .project-item,
    .exhibition-name,
    .timeline-name,
    .artwork-detail-name {
      font-size: 18px;
    }

    /* Overlay Spacing: 20px -> 10px */
    .overlay-text {
      bottom: 10px !important;
      left: 10px !important;
    }
  }
}